<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embedded Messaging</title>
    <meta http-equiv="Content-Security-Policy" content="frame-src 'self' https://salesforce.com;">
</head>
<body>
    <button onclick="initEmbeddedMessaging()">Avvia Messaging Embedded</button>

    <script type='text/javascript'>
        function initEmbeddedMessaging() {
            try {
                // Lingua del bot in modo dinamico.
                const params = new URLSearchParams(window.location.search);
                let varLang = params.has('language') ? params.get('language') : 'en_US';
                embeddedservice_bootstrap.settings.language = varLang; // For example, enter 'en' or 'en-US'
                // embeddedservice_bootstrap.settings.devMode = true;
                window.addEventListener("onEmbeddedMessagingReady", () => {
                        embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({ 'APISITOWEB': 'GORI' });
                    }
                );

                embeddedservice_bootstrap.init(
                    '00D1l0000000z3P',
                    'Enhanced_ChatBot',
                    'https://aceaidrico--migration.sandbox.my.site.com/ESWEnhancedChatBot1706709397585',
                    {
                        scrt2URL: 'https://aceaidrico--migration.sandbox.my.salesforce-scrt.com'
                    }
                );
            } catch (err) {
                console.error('Error loading Embedded Messaging: ', err);
            }
        };
    </script>
    <script type='text/javascript' src='https://aceaidrico--migration.sandbox.my.site.com/ESWEnhancedChatBot1706709397585/assets/js/bootstrap.min.js'></script>
</body>
